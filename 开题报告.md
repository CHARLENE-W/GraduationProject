# 开题报告

题目内容：改进出租车调度系统

出租车调度系统的改进：

- 信誉值
- 算法改进（车辆导航）
- 前端优化

## 一、研究背景

​		2021年10月12日公安部发布最新统计数据，截至2021年9月，全国机动车保有量达3.90亿辆，其中汽车2.97亿辆；全国机动车驾驶人4.76亿人，其中汽车驾驶人4.39亿人。随着城市中流通车辆不断增加，城市交通压力不断增加，”出行难“已经成为人们生活中会遇到的一大问题。		

​		在面对停车难、道路拥堵、限号出行等多种问题时，乘坐公共交通、打车等已经成为人们出行的重要选择，而相比于定时定点的公共交通，打车出行相比之下更为灵活方便。随着交通基础设施的不断完善，人们愈发依赖便捷的交通，但同时对于出行的需求也更多，传统的出租车已经无法满足人们对于便捷度要求，由此也催生出了网约车这一事物。网约车，即网络预约出租汽车经营服务的简称，是指以互联网技术为依托构建服务平台，接入符合条件的车辆和驾驶员，通过整合供需信息，提供非巡游的预约出租汽车服务的经营活动。网络预约出租车[5]针对性更强，使得用户出行时间路线更为可控，切实的便捷了人们的出行。

​		但随着该市场的不断发展，问题也逐步显现：从网约车平台、乘客、司机三方主体来看，存在着平台规则不透明、司机身份不透明、乘客恶意投诉等问题。

​		区块链[6]去中心化、开放性、独立性、安全性、匿名性等特点保证了该技术的”诚实“与“透明”。由于该技术数据存储与流动不依赖额外第三方，去除了中心管制，这为打破数据垄断提供了必要的技术基础。我们可以利用区块链技术[8]建立可信任、去中心化的数据库，创造共享式经济。在打车中应用区块链技术能够消除中介，允许乘客与司机的直接交流与交易，同时由于区块链平台数据的透明性，能够为双方提供更为可信的验证，降低了信任成本。在网络出租车服务中使用区块链有助于参与的所有利益相关方关系更加紧密，这将为安全高效的打车服务铺平道路[2]。

​	

## 二、主要任务

​		本文主要完善实验室现有的基于区块链的调度系统，增强其适用性。

### 2.1 已有工作

​		目前已经实现了基于以太坊智能合约平台实现geohash矢量地图的存储与调用，实现了基于geohash的导航算法，实现了基于geohash的车乘调度系统。将传统的经纬度表示的地图数据表示为基于geohash编码的地图数据，并存储于区块链上，摆脱了对外部地图数据的依赖，保障了地图数据的安全性。在导航算法中，使用A*算法,计算因子为道路长度。在此基础上，实现了多点并发的车程调度系统，实现了多司机、多乘客的调度与路径导航。

### 2.2 改进方向

​		一方面，针对当前出租车调度平台信息不透明的问题，结合信誉评估算法，对司机及乘客信誉进行评估。传统的信誉管理系统依赖于第三方平台的监督管理，所有数据与用户的交互都须经过该平台，这样的方式随着计算量的增加，计算压力与数据传输时延都相应增加，同时由于平台处于隐私安全问题对于数据的保密，这也导致了用户对于平台提供数据的不信任。对于基于区块链的去中心化的信誉管理，数据稳定性更强，且将以太坊账户作为用户个人账户，其交易记录均被记录且不可私自篡改[3]。由此，将现有的调度系统与信誉评估相结合，对于增加出行安全性，提高乘车服务有着重要作用。

​		另一方面，由于受到天气、上下班高峰、交通突发情况等多种因素影响，道路交通呈现非线性、随机性和不确定性的特点，目前实验室所构造的出租车调度系统路径导航算法仅基于地图信息，该约束条件面对复杂的道路状况有一定的局限性，由此增加路况信息作为路径规划的另一约束条件，使其能更好的适应现实道路问题。当前已经有了基于相关实时路况的路径规划算法[1],本文将结合前人工作，将路况信息加入路径规划的约束条件中。

## 三、技术方案分析

### 3.1 信誉评估	

​		基于吴玥仪所设计的车载自组网中车辆信誉评估的算法，通过用户交互以及用户活跃度，作为主要因素衡量车辆的信誉度，并加入打分环节，通过司机对乘客打分，乘客对司机打分，作为信誉度计算的一定参考。具体算法如下：
![image](https://user-images.githubusercontent.com/75356066/149443156-3a553dd6-ff1a-4fbc-bb5a-21ea0becec0e.png)


$$ T'=T+\Delta T*D(t) $$ 

其中T为本次信誉计算前的原始信誉值， $\Delta T$是根据其他因素计算而得的信誉偏移值，D(t)是基于数据提交时间间隔得到的时间衰减系数，其计算方法如下：
![image](https://user-images.githubusercontent.com/75356066/149443170-e42ae616-db54-4796-b18a-2e907a6419d0.png)

​	$$D(t)=\frac {1}{\delta *(t-t_1) } $$

其中![image](https://user-images.githubusercontent.com/75356066/149443213-890d121f-bc96-481d-901a-7b2ecca25117.png)
$\delta$为参数，t为本次提交数据的时间，t1表示上一次提交数据的时间。通过引入时间衰减系数，能够激励用户更多的参与信誉评价，使得活跃度直接影响本次提交数据的作用效果，长时间不提交数据会导致该次提交的数据对信誉值的影响减弱。通过时间衰减系数作为用户激励，能够更好的鼓励用户参与交互，为系统提供更准确更丰富的数据。

​		对于![image](https://user-images.githubusercontent.com/75356066/149443238-77564733-e440-44b3-8f2d-670d5c70609c.png)
$\Delta T$，本文主要考虑用户评价即用户对于另一用户各项指标的评价数据计算得来，在此采用层次分析法[4]（AHP）综合确定此次评价对于司机的信誉偏移影响。具体方法如下：

- 首先确定影响司机信誉值的主要因素：是否准时、是否按照规定路线行驶、服务态度是否良好、有无违规行为;影响乘客信誉值的主要因素：是否准时，行为是否文明、有无违规行为。司机与乘客对本次交易即对方行为进行评分。
- 构造判断矩阵，确定各指标（![image](https://user-images.githubusercontent.com/75356066/149443277-02ac2e60-0314-459f-877d-08cc81092492.png)
$A_i$）的影响因子（![image](https://user-images.githubusercontent.com/75356066/149443293-8c008a60-c112-4344-9565-2f0299894c82.png)
$\gamma_i$），即权重。并通过一致性检验。
- 根据![image](https://user-images.githubusercontent.com/75356066/149443310-fdaeb675-1564-4d21-88d3-69892624b07b.png)
 $\Delta T=\sum \gamma_i*A_i $ 计算出本次评价的综合评分

​		通过每一次交易中的评分，可记录司机与乘客的行为，并即时地反映至用户信誉，由此可以更好的约束司机与乘客的行为，营造更加良好的出行环境。

### 3.2 路径规划

​		通过geohash技术[7]，将二维经纬度转换为长度一定的字符串，模糊了具体位置，保护了隐私，同时又将庞大的数据量在一定的精准度下聚合，更加容易做缓存。在实验室工作的基础上，利用树状区块链存储的方式提高查找存储效率。目前出租车调度系统的路径规划仅依赖于上述提到的地图信息，在此为了更加符合实际运用，满足显示复杂多变的路径状况，将路况信息加入路径规划考虑中。

​		A\*算法[9]是进一步优化Dijkstra的算法，是一种静态路网中求解最短路径最有效的启发式搜索方法[10]。A*算法的估价函数表示为
![image](https://user-images.githubusercontent.com/75356066/149443346-9799dab2-fdd5-45ce-81eb-4fda0804f1c6.png)

​	$f(n)=g(n)+h(n)$

其中f(n)为估价函数，g(n) 是节点n距离起点的代价，h(n)是节点n距离终点的预计代价,也即是启发值，通常使用曼哈顿距离。A*算法在运算过程中，每次从优先队列中选取f(n)值最小（优先级最高）的节点作为下一个待遍历的节点。

结合路况信息，在此用道路行驶速度代表，另外本文不具体考虑路况信息的来源与更新，仅考虑该路况信息对于路径规划的影响。对于节点n，其估价函数设计如下：
![image](https://user-images.githubusercontent.com/75356066/149443358-474887ae-1d1c-49df-aa65-75260e033435.png)

​		$g(n)=\sum \frac{d_i}{\sigma_1*v_i}  $

​		$h(n)=\sum \frac{d_{ix}+d_{iy}}{\sigma_2*v_i}$

其中，![image](https://user-images.githubusercontent.com/75356066/149443392-878ae53a-79d1-43a8-8c6b-3fb5f2878622.png)
$d_i$为两相邻节点的距离，![image](https://user-images.githubusercontent.com/75356066/149443403-1fe2d3f7-b10f-4c70-8d18-59e6a5a35a9a.png)
$d_{ix}$与$d_{iy}$分别为水平方向和竖直方向的代价，$v_i$为两相邻节点间道路的行驶速度，![image](https://user-images.githubusercontent.com/75356066/149443427-30a962bb-c88c-4a19-b875-ce260211e6b9.png)
$\sigma_1、\sigma_2$为参数。由此将路况与距离结合，进一步模拟真实情况。

## 3.3 前端优化

​		在目前所作前端界面的基础上，进行进一步优化丰富，增加更为便捷的使用接口，降低使用难度。目前计划增加接口有

- 用户评价入口
- 丰富用户选择目的地与出发地的方式

## 四、实施技术方案所需条件

以太坊平台、leaflet框架，geohash

## 五、存在的主要问题和技术关键

​	针对现有的基于区块链的出租车调度系统，提出了信誉值评估以及改进路径规划算法的优化方向，充分考虑到现实环境下，用户行为不可测、交通情况不可测的多种情况，尽可能的保障用户安全舒适的出行体验。

​	技术关键：路况数据的获取和筛选，信誉值算法逻辑的设计，导航算法基于路况环境的优化

## 六、预期达到的研究目标

软件成果

完成当前出租车调度系统与信誉值评估的整合，完善其路径规划算法并丰富前端接口。

论文成果

完成一篇论文

## 七、时间安排

1.1-1.15	查阅文献，了解课题研究内容，确定毕设方向，初步制定研究方案，撰写开题报告

1.15-1.20	学习geohash的地图表示，以及leaflet框架学习

1.20-1.30	学习树状区块链的存储表示及相应使用接口

1.31-2.28	部署以太坊环境，复现成佳壮学长工作，能够实现现有的调度模型

2.28-3.15	加入信誉值评估

3.15-4.1	加入路况信息，并对路径规划算法做出调整

4.1-4.15	整合系统，并对当前运行情况进行优化调整

4.15-4.30	丰富前端接口，完善可视化设计

4.30-5.12	性能测试及优化

5.12-6月初	完成毕业论文，参加答辩

## 八、参考文献

(近五年文献)

[1]雷东升,诸彤宇. 一种基于实时路况信息的动态路径规划算法[C]. //2008年中国信息技术与应用学术论坛论文集. 2008:28-30.

[2]Dorri A, Steger M, Kanhere S S, et al. Blockchain: A distributed solution to automotive

security and privacy[J/OL]. IEEE Communications Magazine, 2017, 55(12): 119-125. DOI:

10.1109/MCOM.2017.1700879.

[3]Y. Gilad, R. Hemo, S. Micali, G. Vlachos, and N. Zeldovich. Algorand: Scaling byzantine

agreements for cryptocurrencies. *SOSP 2017 - Proceedings of the 26th ACM Symposium on*

*Operating Systems Principles*, pages 51–68, 2017. doi: 10.1145/3132747.3132757.

[4]Leal, José. (2019). AHP-express: A simplified version of the analytical hierarchy process method. MethodsX. 7. 10.1016/j.mex.2019.11.021. 

[5]梁锋. 网络约租车优劣势分析与新发展研究[J]. 科技展望,2017,27(10):283. DOI:10.3969/j.issn.1672-8289.2017.10.252.

[6]Ethereum Community. Ethereum blockchain. URL https://www.ethereum.org/

[7]Zhou, C.; Lu, H.; Xiang, Y.; Wu, J.; Wang, F. GeohashTile: Vector Geographic Data Display Method Based on Geohash. *ISPRS Int. J. Geo-Inf.* **2020**, *9*, 418. https://doi.org/10.3390/ijgi9070418

[8] Q. Zhou, H. Huang, Z. Zheng and J. Bian, "Solutions to Scalability of Blockchain: A Survey," in *IEEE Access*, vol. 8, pp. 16440-16455, 2020, doi: 10.1109/ACCESS.2020.2967218.

[9]Rachmawati, Dian & Gustin, Lysander. (2020). Analysis of Dijkstra’s Algorithm and A* Algorithm in Shortest Path Problem. Journal of Physics: Conference Series. 1566. 012061. 10.1088/1742-6596/1566/1/012061. 

[10]]张海涛, 程荫杭. 基于A*算法的全局路径搜索[J]. 微计算机信息, 2007(17):3.

​		



